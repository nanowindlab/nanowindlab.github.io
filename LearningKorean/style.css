:root {
      --primary: #5D5FEF;
      --secondary: #10B981;
      --secondary-2: #34D399;
      --wordText: #FFFFFF;
      --radius: 16px;
      --transition-speed: 0.5s;
      --base-w: 320px;
      --base-h: 450px;
      --card-w: var(--base-w);
      --card-h: var(--base-h);
      --fs-k_word: 50px;
      --fs-e_word: 50px;
      --fs-k_sentence: 32px;
      --pad: 10px;
      /* 36px * 0.66 ≈ 24px */
      --fab-size: 24px;
      --fab-offset: 10px;
    }

    @media (prefers-reduced-motion: reduce) {
      :root { --transition-speed: 0.15s; }
      .slot-inner { transition: none !important; }
    }

    * { box-sizing: border-box; }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      background: #0f172a;
      font-family: "Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    #card-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      padding: 20px;
      width: 100%;
      max-width: 1200px;
    }

    .card {
      width: 100%;
      height: 0;
      padding-bottom: 140.625%; /* 450/320 aspect ratio */
      position: relative;
      display: grid;
      grid-template-rows: 2fr 1fr;
      border-radius: var(--radius);
      overflow: hidden;
      background: #FFFFFF;
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }

    .card-content {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: grid;
        grid-template-rows: 2fr 1fr;
    }

    .slot { position: relative; perspective: 1000px; }
    .slot-inner {
      position: absolute; inset: 0; transform-style: preserve-3d;
      transition: transform var(--transition-speed) cubic-bezier(.2,.8,.2,1);
    }
    .slot.flipped .slot-inner { transform: rotateY(180deg); }
    .face {
      position: absolute; inset: 0; display: flex; align-items: center; justify-content: center;
      backface-visibility: hidden; padding: var(--pad);
      border-radius: 0;
    }

    /* DESIGN */
    .front.top { background: #FFFFFF; }
    .back.top  { background: linear-gradient(135deg, #22d3ee, #0ea5e9); color: #fff; transform: rotateY(180deg); flex-direction: column; }
    .front.bottom { background: linear-gradient(135deg, #6366F1, var(--primary)); color: var(--wordText); flex-direction: column; }
    .back.bottom  { background: linear-gradient(135deg, var(--secondary), var(--secondary-2)); color: #fff; transform: rotateY(180deg); flex-direction: column; }

    .image-wrap {
      width: 100%; height: 100%;
      border-radius: 12px; overflow: hidden;
      display: flex; align-items: center; justify-content: center; background: #fff;
      box-shadow: none;
    }
        .image-wrap img { width: 100%; height: 100%; object-fit: contain; transition: transform 0.4s cubic-bezier(.2,.8,.2,1); }
    .card:hover .image-wrap img { transform: scale(1.1); }

    .word {
      font-weight: 800; text-align: center; line-height: 1.2;
      font-size: 5.0vw;
      white-space: pre-line;
      word-break: break-word; overflow-wrap: anywhere;
      padding: 0 6px;
    }
    .meaning {
      font-size: clamp(18px, 5.0vw, 44px); font-weight: 800; text-align: center; white-space: pre-line;
      word-break: break-word; overflow-wrap: anywhere;
      padding: 0 6px;
    }
    .example {
            font-size: clamp(14px, 3.6vw, 32px);
      text-align: center; white-space: pre-line;
      word-break: break-word; overflow-wrap: anywhere;
      padding: 0 6px;
    }

    .audio-fab {
      position: absolute;
      top: var(--fab-offset);
      right: var(--fab-offset);
      z-index: 2;
      width: var(--fab-size);
      height: var(--fab-size);
      border-radius: 9999px;
      display: inline-flex; align-items: center; justify-content: center;
      background: rgba(255,255,255,0.22);
      border: 1px solid rgba(255,255,255,0.45);
      box-shadow: 0 8px 22px rgba(0,0,0,.25);
      color: #FFFFFF;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      cursor: pointer;
      transition: transform .18s ease, box-shadow .2s ease, background .25s ease;
    }
    .audio-fab:hover { transform: translateY(-1px) scale(1.08); background: rgba(255,255,255,0.3); box-shadow: 0 10px 26px rgba(0,0,0,.3); }
    .audio-fab:active { transform: translateY(0) scale(0.95); }
    .audio-fab svg { width: 16px; height: 16px; fill: currentColor; }

    .flip-target { outline: none; cursor: pointer; }
    .flip-target:focus-visible { box-shadow: 0 0 0 3px rgba(93,95,239,.35) inset; border-radius: 8px; }

    #pagination {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      color: #fff;
    }
    #pagination button {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 0 10px;
      transition: background 0.3s;
    }
    #pagination button:hover {
      background: #4338ca;
    }
    #pagination button:disabled {
      background: #374151;
      cursor: not-allowed;
    }

    #category-filter-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      padding: 20px;
      width: 100%;
      max-width: 1200px;
    }

    .category-button {
      background: #374151;
      color: #fff;
      border: 1px solid #4b5563;
      padding: 8px 16px;
      border-radius: 9999px;
      cursor: pointer;
      transition: background 0.3s, color 0.3s;
    }

    .category-button:hover {
      background: #4b5563;
    }

    .category-button.active {
      background: var(--primary);
      color: #fff;
      font-weight: bold;
      border-color: var(--primary);
    }

    #mobile-nav {
      display: none; /* 평소에는 숨김 */
      align-items: center;
      justify-content: center;
      padding: 20px;
      color: #fff;
    }
    #mobile-nav button {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      margin: 0 10px;
      transition: background 0.3s;
    }
    #mobile-nav button:hover {
      background: #4338ca;
    }
    #mobile-nav button:disabled {
      background: #374151;
      cursor: not-allowed;
    }

    /* --- 반응형 디자인: 모바일 화면 --- */
    @media (max-width: 768px) {
      #card-container {
        /* 모바일에서는 그리드가 아닌 일반 블록 형태로 변경 */
        display: block;
        padding: 10px;
      }

      .card {
        width: 90%;
        max-width: 360px;
        margin: 0 auto; /* 가운데 정렬 */
        padding-bottom: 126%; /* 모바일용 비율 재조정 */
      }

      .word, .meaning {
        font-size: 8vw; /* 모바일에서 글자 크게 */
      }

      .example {
        font-size: 5vw;
      }

      #pagination {
        display: none; /* 데스크탑용 페이지네이션 숨김 */
      }

      #mobile-nav {
        display: flex; /* 모바일용 네비게이션 보임 */
      }
    }